<html>
    <head>
        <title>Chatbot_GitHub</title>
        <meta http-equiv="Access-Control-Allow-Origin" content="*">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    </head>
    <body>
        
        <div align="center">DevMerge BOT - V1</div>

        <script type='text/javascript'>
            
            // Pre-chat event listener. Add this somewhere inside the page where the 
            window.addEventListener("onEmbeddedMessagingReady", () => {
                console.log("Received the onEmbeddedMessagingReady event");

                console.log("element1: "+document.getElementById("embeddedMessagingConversationButton"));
                console.log("element style1: "+document.getElementById("embeddedMessagingConversationButton").style);
                document.getElementById("embeddedMessagingConversationButton").style = "background-color:pink";
                
            
                // Fill these values through JavaScript to send data to Salesforce
                // All fields must be of type String and no longer than 100 characters
                embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
                    "UserId" : "1029488393", // CAT User Identifier (Unique Key)
                    "AccountId" : "8874788222", // CAT Customer Identifier (Unique Key)
                    "FirstName" : "Mario", // User First Name
                    "LastName" : "Rossi", // User Last Name
                    "Email" : "" // User Email
                });

                embeddedservice_bootstrap.utilAPI
                  .then(function (success) {
                    console.log("element2: "+document.getElementById("embeddedMessagingConversationButton"));
                    console.log("element style2: "+document.getElementById("embeddedMessagingConversationButton").style);
                    document.getElementById("embeddedMessagingConversationButton").style = "background-color:pink";
                  })
            
                // If necessary, remove any items from the previous list that you don't want to send
                //embeddedservice_bootstrap.prechatAPI.removeHiddenPrechatFields(["Customer_ID"]);
            });
            
        	function initEmbeddedMessaging() {
        		try {
        			embeddedservice_bootstrap.settings.language = 'it'; // Set Language
                    embeddedservice_bootstrap.settings.widgetWidth = '50%'; // Set size
        
        			embeddedservice_bootstrap.init(
        				'00DDH00000057Ze',
        				'CGT_Bot_Web_Deployment',
        				'https://cgtspa--devmerge.sandbox.my.site.com/ESWCGTBotWebDeployment1697542037993',
        				{
        					scrt2URL: 'https://cgtspa--devmerge.sandbox.my.salesforce-scrt.com'
        				}
        			);
        		} catch (err) {
        			console.error('Error loading Embedded Messaging: ', err);
        		}
        	};
        </script>
        <script type='text/javascript' src='https://cgtspa--devmerge.sandbox.my.site.com/ESWCGTBotWebDeployment1697542037993/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>

    </body>
</html>
